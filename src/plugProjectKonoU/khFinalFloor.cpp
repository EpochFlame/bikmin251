#include "types.h"

/*
    Generated from dpostproc

    .section .ctors, "wa"  # 0x80472F00 - 0x804732C0
        .4byte __sinit_khFinalFloor_cpp

    .section .rodata  # 0x804732E0 - 0x8049E220
    .global lbl_80498758
    lbl_80498758:
        .4byte 0x00000000
        .4byte 0x00000000
        .4byte 0x00000000
    .global lbl_80498764
    lbl_80498764:
        .4byte 0x6B684669
        .4byte 0x6E616C46
        .4byte 0x6C6F6F72
        .4byte 0x2E637070
        .4byte 0x00000000
    .global lbl_80498778
    lbl_80498778:
        .4byte 0x64697370
        .4byte 0x206D656D
        .4byte 0x62657220
        .4byte 0x65727200
        .4byte 0x66696E61
        .4byte 0x6C5F666C
        .4byte 0x6F6F722E
        .4byte 0x626C6F00
        .4byte 0x66696E61
        .4byte 0x6C5F666C
        .4byte 0x6F6F722E
        .4byte 0x62636B00
        .4byte 0x66696E61
        .4byte 0x6C5F666C
        .4byte 0x6F6F722E
        .4byte 0x62706B00
        .4byte 0x50534761
        .4byte 0x6D652E68
        .4byte 0x00000000
        .asciz "P2Assert"
        .skip 3
        .4byte 0x50535363
        .4byte 0x656E652E
        .4byte 0x68000000
        .4byte 0x67657420
        .4byte 0x736F756E
        .4byte 0x64207363
        .4byte 0x656E6520
        .4byte 0x61740A69
        .4byte 0x6E76616C
        .4byte 0x69642074
        .4byte 0x696D6D69
        .4byte 0x6E670A00
        .4byte 0x50534D61
        .4byte 0x696E5369
        .4byte 0x64655F53
        .4byte 0x63656E65
        .4byte 0x2E680000
    .global lbl_80498814
    lbl_80498814:
        .4byte 0x66696E61
        .4byte 0x6C5F666C
        .4byte 0x6F6F722E
        .4byte 0x737A7300
        .4byte 0x73637265
        .4byte 0x656E4F62
        .4byte 0x6A2E6800

    .section .data, "wa"  # 0x8049E220 - 0x804EFC20
    .global lbl_804EACA0
    lbl_804EACA0:
        .4byte 0x00000000
        .4byte 0x00000000
        .4byte 0x00000000
    .global __vt__Q32kh6Screen15SceneFinalFloor
    __vt__Q32kh6Screen15SceneFinalFloor:
        .4byte 0
        .4byte 0
        .4byte getSceneType__Q32kh6Screen15SceneFinalFloorFv
        .4byte getOwnerID__Q32kh6Screen15SceneFinalFloorFv
        .4byte getMemberID__Q32kh6Screen15SceneFinalFloorFv
        .4byte isUseBackupSceneInfo__Q32kh6Screen15SceneFinalFloorFv
        .4byte isDrawInDemo__Q26Screen9SceneBaseCFv
        .4byte getResName__Q32kh6Screen15SceneFinalFloorCFv
        .4byte doCreateObj__Q32kh6Screen15SceneFinalFloorFP10JKRArchive
        .4byte doUserCallBackFunc__Q26Screen9SceneBaseFPQ28Resource10MgrCommand
        .4byte setPort__Q26Screen9SceneBaseFR8Graphics
        .4byte doUpdateActive__Q26Screen9SceneBaseFv
        .4byte
   doConfirmSetScene__Q32kh6Screen15SceneFinalFloorFRQ26Screen11SetSceneArg
        .4byte
   doConfirmStartScene__Q26Screen9SceneBaseFPQ26Screen13StartSceneArg .4byte
   doConfirmEndScene__Q26Screen9SceneBaseFRPQ26Screen11EndSceneArg .4byte
   doStart__Q26Screen9SceneBaseFPQ26Screen13StartSceneArg .4byte
   doEnd__Q26Screen9SceneBaseFPQ26Screen11EndSceneArg .4byte
   setDefaultDispMember__Q26Screen9SceneBaseFv .4byte
   doSetBackupScene__Q26Screen9SceneBaseFRQ26Screen11SetSceneArg .4byte
   doGetFinishState__Q26Screen9SceneBaseFv .global
   __vt__Q32kh6Screen13ObjFinalFloor
    __vt__Q32kh6Screen13ObjFinalFloor:
        .4byte 0
        .4byte 0
        .4byte __dt__Q32kh6Screen13ObjFinalFloorFv
        .4byte getChildCount__5CNodeFv
        .4byte 0
        .4byte 0
        .4byte "@24@__dt__Q32kh6Screen13ObjFinalFloorFv"
        .4byte update__Q26Screen7ObjBaseFv
        .4byte draw__Q26Screen7ObjBaseFR8Graphics
        .4byte start__Q26Screen7ObjBaseFPCQ26Screen13StartSceneArg
        .4byte end__Q26Screen7ObjBaseFPCQ26Screen11EndSceneArg
        .4byte setOwner__Q26Screen7ObjBaseFPQ26Screen9SceneBase
        .4byte getOwner__Q26Screen7ObjBaseCFv
        .4byte create__Q26Screen7ObjBaseFP10JKRArchive
        .4byte confirmSetScene__Q26Screen7ObjBaseFRQ26Screen11SetSceneArg
        .4byte confirmStartScene__Q26Screen7ObjBaseFPQ26Screen13StartSceneArg
        .4byte confirmEndScene__Q26Screen7ObjBaseFPQ26Screen11EndSceneArg
        .4byte doStart__Q26Screen7ObjBaseFPCQ26Screen13StartSceneArg
        .4byte doEnd__Q26Screen7ObjBaseFPCQ26Screen11EndSceneArg
        .4byte doCreate__Q32kh6Screen13ObjFinalFloorFP10JKRArchive
        .4byte doUpdateFadein__Q32kh6Screen13ObjFinalFloorFv
        .4byte doUpdateFadeinFinish__Q26Screen7ObjBaseFv
        .4byte doUpdate__Q32kh6Screen13ObjFinalFloorFv
        .4byte doUpdateFinish__Q26Screen7ObjBaseFv
        .4byte doUpdateFadeout__Q32kh6Screen13ObjFinalFloorFv
        .4byte doUpdateFadeoutFinish__Q32kh6Screen13ObjFinalFloorFv
        .4byte doDraw__Q32kh6Screen13ObjFinalFloorFR8Graphics
        .4byte doConfirmSetScene__Q26Screen7ObjBaseFRQ26Screen11SetSceneArg
        .4byte doConfirmStartScene__Q26Screen7ObjBaseFPQ26Screen13StartSceneArg
        .4byte doConfirmEndScene__Q26Screen7ObjBaseFRPQ26Screen11EndSceneArg
        .4byte 0

    .section .bss  # 0x804EFC20 - 0x8051467C
    .global msVal__Q32kh6Screen13ObjFinalFloor
    msVal__Q32kh6Screen13ObjFinalFloor:
        .skip 0xC

    .section .sbss # 0x80514D80 - 0x80516360
    .global lbl_80516130
    lbl_80516130:
        .skip 0x4
    .global lbl_80516134
    lbl_80516134:
        .skip 0x4

    .section .sdata2, "a"     # 0x80516360 - 0x80520E40
    .global lbl_80520088
    lbl_80520088:
        .4byte 0x00000000
    .global lbl_8052008C
    lbl_8052008C:
        .4byte 0x3FC00000
    .global lbl_80520090
    lbl_80520090:
        .4byte 0x43300000
        .4byte 0x80000000
    .global lbl_80520098
    lbl_80520098:
        .4byte 0xC2F00000
    .global lbl_8052009C
    lbl_8052009C:
        .4byte 0x42F00000
    .global lbl_805200A0
    lbl_805200A0:
        .4byte 0x3F4CCCCD
        .4byte 0x00000000
*/

namespace kh {
namespace Screen {

/*
 * --INFO--
 * Address:	80401D38
 * Size:	00021C
 */
void ObjFinalFloor::doCreate(JKRArchive*)
{
	/*
stwu     r1, -0x20(r1)
mflr     r0
lis      r5, lbl_80498758@ha
stw      r0, 0x24(r1)
stmw     r27, 0xc(r1)
mr       r27, r3
mr       r28, r4
addi     r31, r5, lbl_80498758@l
bl       getDispMember__Q26Screen7ObjBaseFv
lis      r4, 0x5F464C52@ha
lis      r5, 0x0046494E@ha
addi     r6, r4, 0x5F464C52@l
li       r4, 0x4b48
addi     r5, r5, 0x0046494E@l
bl       isID__Q32og6Screen14DispMemberBaseFUlUx
clrlwi.  r0, r3, 0x18
bne      lbl_80401D90
addi     r3, r31, 0xc
addi     r5, r31, 0x20
li       r4, 0x39
crclr    6
bl       panic_f__12JUTExceptionFPCciPCce

lbl_80401D90:
mr       r3, r27
bl       getDispMember__Q26Screen7ObjBaseFv
lbz      r0, 8(r3)
cmplwi   r0, 0
beq      lbl_80401DC4
li       r0, 2
lis      r3, msVal__Q32kh6Screen13ObjFinalFloor@ha
stw      r0, 0x68(r27)
addi     r3, r3, msVal__Q32kh6Screen13ObjFinalFloor@l
lfs      f0, 4(r3)
stfs     f0, 0x60(r27)
lfs      f0, 8(r3)
stfs     f0, 0x64(r27)

lbl_80401DC4:
mr       r30, r27
li       r29, 0
b        lbl_80401E60

lbl_80401DD0:
li       r3, 0x148
bl       __nw__FUl
or.      r0, r3, r3
beq      lbl_80401DE8
bl       __ct__Q29P2DScreen10Mgr_tuningFv
mr       r0, r3

lbl_80401DE8:
stw      r0, 0x38(r30)
mr       r6, r28
addi     r4, r31, 0x30
lis      r5, 4
lwz      r3, 0x38(r30)
bl       set__9J2DScreenFPCcUlP10JKRArchive
mr       r4, r28
addi     r3, r31, 0x40
bl       getGlbResource__13JKRFileLoaderFPCcP13JKRFileLoader
bl       load__20J2DAnmLoaderDataBaseFPCv
stw      r3, 0x40(r30)
mr       r4, r28
addi     r3, r31, 0x50
bl       getGlbResource__13JKRFileLoaderFPCcP13JKRFileLoader
bl       load__20J2DAnmLoaderDataBaseFPCv
stw      r3, 0x48(r30)
lwz      r3, 0x38(r30)
lwz      r4, 0x40(r30)
lwz      r12, 0(r3)
lwz      r12, 0x60(r12)
mtctr    r12
bctrl
lwz      r3, 0x38(r30)
lwz      r4, 0x48(r30)
lwz      r12, 0(r3)
lwz      r12, 0x64(r12)
mtctr    r12
bctrl
addi     r30, r30, 4
addi     r29, r29, 1

lbl_80401E60:
lwz      r0, 0x68(r27)
cmpw     r29, r0
blt      lbl_80401DD0
lis      r3, 0xC0011025@ha
addi     r3, r3, 0xC0011025@l
bl       PSStart2DStream__FUl
lwz      r0, spSceneMgr__8PSSystem@sda21(r13)
cmplwi   r0, 0
bne      lbl_80401E98
addi     r3, r31, 0x60
addi     r5, r31, 0x6c
li       r4, 0x1d3
crclr    6
bl       panic_f__12JUTExceptionFPCciPCce

lbl_80401E98:
lwz      r30, spSceneMgr__8PSSystem@sda21(r13)
cmplwi   r30, 0
bne      lbl_80401EB8
addi     r3, r31, 0x60
addi     r5, r31, 0x6c
li       r4, 0x1dc
crclr    6
bl       panic_f__12JUTExceptionFPCciPCce

lbl_80401EB8:
lwz      r0, 4(r30)
cmplwi   r0, 0
bne      lbl_80401ED8
addi     r3, r31, 0x78
addi     r5, r31, 0x6c
li       r4, 0xcf
crclr    6
bl       panic_f__12JUTExceptionFPCciPCce

lbl_80401ED8:
lwz      r3, 4(r30)
lwz      r30, 4(r3)
cmplwi   r30, 0
bne      lbl_80401EFC
addi     r3, r31, 0x78
addi     r5, r31, 0x84
li       r4, 0xd1
crclr    6
bl       panic_f__12JUTExceptionFPCciPCce

lbl_80401EFC:
lwz      r12, 0(r30)
mr       r3, r30
lwz      r12, 0x40(r12)
mtctr    r12
bctrl
clrlwi.  r0, r3, 0x18
bne      lbl_80401F2C
addi     r3, r31, 0xa8
addi     r5, r31, 0x6c
li       r4, 0x177
crclr    6
bl       panic_f__12JUTExceptionFPCciPCce

lbl_80401F2C:
mr       r3, r30
lwz      r12, 0(r30)
lwz      r12, 0x54(r12)
mtctr    r12
bctrl
lmw      r27, 0xc(r1)
lwz      r0, 0x24(r1)
mtlr     r0
addi     r1, r1, 0x20
blr
	*/
}

/*
 * --INFO--
 * Address:	80401F54
 * Size:	000020
 */
void ObjFinalFloor::doUpdate()
{
	/*
stwu     r1, -0x10(r1)
mflr     r0
stw      r0, 0x14(r1)
bl       updateAnimation__Q32kh6Screen13ObjFinalFloorFv
lwz      r0, 0x14(r1)
mtlr     r0
addi     r1, r1, 0x10
blr
	*/
}

/*
 * --INFO--
 * Address:	80401F74
 * Size:	0000DC
 */
void ObjFinalFloor::doDraw(Graphics& gfx)
{
	/*
stwu     r1, -0x40(r1)
mflr     r0
stw      r0, 0x44(r1)
stfd     f31, 0x30(r1)
psq_st   f31, 56(r1), 0, qr0
stfd     f30, 0x20(r1)
psq_st   f30, 40(r1), 0, qr0
stmw     r27, 0xc(r1)
mr       r28, r4
mr       r27, r3
addi     r3, r28, 0xbc
lwz      r12, 0xbc(r4)
lwz      r12, 0x14(r12)
mtctr    r12
bctrl
lfs      f31, lbl_80520088@sda21(r2)
mr       r30, r27
li       r29, 0
lis      r31, 0x524f
b        lbl_80402020

lbl_80401FC4:
lwz      r3, 0x38(r30)
addi     r6, r31, 0x4f54
lfs      f30, 0x60(r30)
li       r5, 0
lwz      r12, 0(r3)
lwz      r12, 0x3c(r12)
mtctr    r12
bctrl
stfs     f31, 0xd4(r3)
stfs     f30, 0xd8(r3)
lwz      r12, 0(r3)
lwz      r12, 0x2c(r12)
mtctr    r12
bctrl
lwz      r3, 0x38(r30)
mr       r4, r28
addi     r5, r28, 0xbc
lwz      r12, 0(r3)
lwz      r12, 0x9c(r12)
mtctr    r12
bctrl
addi     r30, r30, 4
addi     r29, r29, 1

lbl_80402020:
lwz      r0, 0x68(r27)
cmpw     r29, r0
blt      lbl_80401FC4
psq_l    f31, 56(r1), 0, qr0
lfd      f31, 0x30(r1)
psq_l    f30, 40(r1), 0, qr0
lfd      f30, 0x20(r1)
lmw      r27, 0xc(r1)
lwz      r0, 0x44(r1)
mtlr     r0
addi     r1, r1, 0x40
blr
	*/
}

/*
 * --INFO--
 * Address:	80402050
 * Size:	000038
 */
void ObjFinalFloor::doUpdateFadein()
{
	/*
stwu     r1, -0x10(r1)
mflr     r0
mr       r4, r3
li       r6, 0
stw      r0, 0x14(r1)
addi     r5, r4, 0x6c
li       r4, 0x1824
lwz      r3, spSysIF__8PSSystem@sda21(r13)
bl       playSystemSe__Q28PSSystem5SysIFFUlPP8JAISoundUl
lwz      r0, 0x14(r1)
li       r3, 1
mtlr     r0
addi     r1, r1, 0x10
blr
	*/
}

/*
 * --INFO--
 * Address:	80402088
 * Size:	0001F8
 */
void ObjFinalFloor::doUpdateFadeout()
{
	/*
stwu     r1, -0x20(r1)
mflr     r0
stw      r0, 0x24(r1)
stw      r31, 0x1c(r1)
mr       r31, r3
stw      r30, 0x18(r1)
li       r30, 0
lwz      r4, gameSystem__4Game@sda21(r13)
cmplwi   r4, 0
beq      lbl_804020D8
lwz      r3, 0x44(r4)
mr       r0, r30
cmpwi    r3, 2
beq      lbl_804020C8
cmpwi    r3, 3
bne      lbl_804020CC

lbl_804020C8:
li       r0, 1

lbl_804020CC:
clrlwi.  r0, r0, 0x18
beq      lbl_804020D8
li       r30, 1

lbl_804020D8:
mr       r3, r31
bl       getDispMember__Q26Screen7ObjBaseFv
lis      r4, 0x5F464C52@ha
lis      r5, 0x0046494E@ha
addi     r6, r4, 0x5F464C52@l
li       r4, 0x4b48
addi     r5, r5, 0x0046494E@l
bl       isID__Q32og6Screen14DispMemberBaseFUlUx
clrlwi.  r0, r3, 0x18
bne      lbl_8040211C
lis      r3, lbl_80498764@ha
lis      r5, lbl_80498778@ha
addi     r3, r3, lbl_80498764@l
li       r4, 0x97
addi     r5, r5, lbl_80498778@l
crclr    6
bl       panic_f__12JUTExceptionFPCciPCce

lbl_8040211C:
mr       r3, r31
bl       getDispMember__Q26Screen7ObjBaseFv
clrlwi.  r0, r30, 0x18
beq      lbl_80402228
lbz      r0, 8(r3)
cmplwi   r0, 0
beq      lbl_804021B0
lis      r4, __vt__Q26Screen12SceneArgBase@ha
lis      r3, __vt__Q26Screen13StartSceneArg@ha
addi     r0, r4, __vt__Q26Screen12SceneArgBase@l
lis      r4, __vt__Q32og9newScreen17SArgChallengeBase@ha
stw      r0, 0x10(r1)
addi     r0, r3, __vt__Q26Screen13StartSceneArg@l
lfs      f0, lbl_8052008C@sda21(r2)
lis      r3, __vt__Q32og9newScreen15SArgChallenge2P@ha
stw      r0, 0x10(r1)
addi     r4, r4, __vt__Q32og9newScreen17SArgChallengeBase@l
addi     r0, r3, __vt__Q32og9newScreen15SArgChallenge2P@l
mr       r3, r31
stw      r4, 0x10(r1)
stfs     f0, 0x14(r1)
stw      r0, 0x10(r1)
lwz      r12, 0(r31)
lwz      r12, 0x30(r12)
mtctr    r12
bctrl
bl       setBackupScene__Q26Screen9SceneBaseFv
clrlwi.  r0, r3, 0x18
beq      lbl_80402264
mr       r3, r31
lwz      r12, 0(r31)
lwz      r12, 0x30(r12)
mtctr    r12
bctrl
addi     r4, r1, 0x10
bl       startScene__Q26Screen9SceneBaseFPQ26Screen13StartSceneArg
b        lbl_80402264

lbl_804021B0:
lis      r4, __vt__Q26Screen12SceneArgBase@ha
lis      r3, __vt__Q26Screen13StartSceneArg@ha
addi     r0, r4, __vt__Q26Screen12SceneArgBase@l
lis      r4, __vt__Q32og9newScreen17SArgChallengeBase@ha
stw      r0, 8(r1)
addi     r0, r3, __vt__Q26Screen13StartSceneArg@l
lfs      f0, lbl_8052008C@sda21(r2)
lis      r3, __vt__Q32og9newScreen15SArgChallenge1P@ha
stw      r0, 8(r1)
addi     r4, r4, __vt__Q32og9newScreen17SArgChallengeBase@l
addi     r0, r3, __vt__Q32og9newScreen15SArgChallenge1P@l
mr       r3, r31
stw      r4, 8(r1)
stfs     f0, 0xc(r1)
stw      r0, 8(r1)
lwz      r12, 0(r31)
lwz      r12, 0x30(r12)
mtctr    r12
bctrl
bl       setBackupScene__Q26Screen9SceneBaseFv
clrlwi.  r0, r3, 0x18
beq      lbl_80402264
mr       r3, r31
lwz      r12, 0(r31)
lwz      r12, 0x30(r12)
mtctr    r12
bctrl
addi     r4, r1, 8
bl       startScene__Q26Screen9SceneBaseFPQ26Screen13StartSceneArg
b        lbl_80402264

lbl_80402228:
mr       r3, r31
lwz      r12, 0(r31)
lwz      r12, 0x30(r12)
mtctr    r12
bctrl
bl       setBackupScene__Q26Screen9SceneBaseFv
clrlwi.  r0, r3, 0x18
beq      lbl_80402264
mr       r3, r31
lwz      r12, 0(r31)
lwz      r12, 0x30(r12)
mtctr    r12
bctrl
li       r4, 0
bl       startScene__Q26Screen9SceneBaseFPQ26Screen13StartSceneArg

lbl_80402264:
lwz      r0, 0x24(r1)
li       r3, 1
lwz      r31, 0x1c(r1)
lwz      r30, 0x18(r1)
mtlr     r0
addi     r1, r1, 0x20
blr
	*/
}

/*
 * --INFO--
 * Address:	80402280
 * Size:	000034
 */
void ObjFinalFloor::doUpdateFadeoutFinish()
{
	/*
stwu     r1, -0x10(r1)
mflr     r0
stw      r0, 0x14(r1)
lwz      r3, gameSystem__4Game@sda21(r13)
lwz      r3, 0x58(r3)
lwz      r12, 0(r3)
lwz      r12, 0x64(r12)
mtctr    r12
bctrl
lwz      r0, 0x14(r1)
mtlr     r0
addi     r1, r1, 0x10
blr
	*/
}

/*
 * --INFO--
 * Address:	804022B4
 * Size:	0001C8
 */
void ObjFinalFloor::updateAnimation()
{
	/*
stwu     r1, -0x40(r1)
mflr     r0
stw      r0, 0x44(r1)
stfd     f31, 0x30(r1)
psq_st   f31, 56(r1), 0, qr0
stmw     r26, 0x18(r1)
mr       r28, r3
lis      r3, msVal__Q32kh6Screen13ObjFinalFloor@ha
lfd      f31, lbl_80520090@sda21(r2)
mr       r31, r28
addi     r26, r3, msVal__Q32kh6Screen13ObjFinalFloor@l
li       r30, 0
li       r29, 0
lis      r27, 0x4330
b        lbl_80402450

lbl_804022F0:
lfs      f0, 0x50(r31)
lwz      r3, 0x40(r31)
stfs     f0, 8(r3)
lfs      f0, 0x58(r31)
lwz      r3, 0x48(r31)
stfs     f0, 8(r3)
lwz      r3, 0x38(r31)
bl       animation__9J2DScreenFv
lwz      r3, gGame2DMgr__6Screen@sda21(r13)
cmplwi   r3, 0
beq      lbl_804023BC
lwz      r3, 0x18(r3)
lbz      r0, 0x92(r3)
cmplwi   r0, 0
beq      lbl_804023BC
lwz      r4, 0x38(r31)
li       r0, 0
lis      r3, 0x4330
lfd      f1, lbl_80520090@sda21(r2)
stb      r0, 0xb0(r4)
lwz      r4, 0x40(r31)
stw      r3, 8(r1)
lha      r4, 6(r4)
lfs      f2, 0x50(r31)
mulli    r0, r4, 3
srawi    r0, r0, 2
xoris    r0, r0, 0x8000
stw      r0, 0xc(r1)
lfd      f0, 8(r1)
fsubs    f0, f0, f1
fcmpo    cr0, f2, f0
ble      lbl_804023AC
xoris    r0, r4, 0x8000
stw      r3, 8(r1)
stw      r0, 0xc(r1)
lfd      f0, 8(r1)
stw      r3, 0x10(r1)
fsubs    f0, f0, f1
stfs     f0, 0x50(r31)
lwz      r3, 0x48(r31)
lha      r0, 6(r3)
xoris    r0, r0, 0x8000
stw      r0, 0x14(r1)
lfd      f0, 0x10(r1)
fsubs    f0, f0, f1
stfs     f0, 0x58(r31)
b        lbl_804023C8

lbl_804023AC:
lfs      f0, lbl_80520088@sda21(r2)
stfs     f0, 0x58(r31)
stfs     f0, 0x50(r31)
b        lbl_804023C8

lbl_804023BC:
lwz      r3, 0x38(r31)
li       r0, 1
stb      r0, 0xb0(r3)

lbl_804023C8:
lfs      f1, 0x50(r31)
lfs      f0, 0(r26)
stw      r27, 0x10(r1)
fadds    f0, f1, f0
stfs     f0, 0x50(r31)
lfs      f1, 0x58(r31)
lfs      f0, 0(r26)
fadds    f0, f1, f0
stfs     f0, 0x58(r31)
lwz      r3, 0x40(r31)
lfs      f1, 0x50(r31)
lha      r0, 6(r3)
xoris    r0, r0, 0x8000
stw      r0, 0x14(r1)
lfd      f0, 0x10(r1)
fsubs    f0, f0, f31
fcmpo    cr0, f1, f0
cror     2, 1, 2
beq      lbl_80402444
lwz      r3, 0x48(r31)
lis      r0, 0x4330
stw      r0, 0x10(r1)
lha      r0, 6(r3)
lfs      f1, 0x58(r31)
xoris    r0, r0, 0x8000
stw      r0, 0x14(r1)
lfd      f0, 0x10(r1)
fsubs    f0, f0, f31
fcmpo    cr0, f1, f0
cror     2, 1, 2
bne      lbl_80402448

lbl_80402444:
li       r30, 1

lbl_80402448:
addi     r31, r31, 4
addi     r29, r29, 1

lbl_80402450:
lwz      r0, 0x68(r28)
cmpw     r29, r0
blt      lbl_804022F0
mr       r3, r30
psq_l    f31, 56(r1), 0, qr0
lfd      f31, 0x30(r1)
lmw      r26, 0x18(r1)
lwz      r0, 0x44(r1)
mtlr     r0
addi     r1, r1, 0x40
blr
	*/
}

/*
 * --INFO--
 * Address:	8040247C
 * Size:	000040
 */
void ObjFinalFloor::stopSound()
{
	/*
stwu     r1, -0x10(r1)
mflr     r0
stw      r0, 0x14(r1)
lwz      r3, 0x6c(r3)
cmplwi   r3, 0
beq      lbl_804024A8
lwz      r12, 0x10(r3)
li       r4, 0
lwz      r12, 0x14(r12)
mtctr    r12
bctrl

lbl_804024A8:
bl       PSStop2DStream__Fv
lwz      r0, 0x14(r1)
mtlr     r0
addi     r1, r1, 0x10
blr
	*/
}

/*
 * --INFO--
 * Address:	804024BC
 * Size:	00015C
 */
void ObjFinalFloor::restartSound()
{
	/*
stwu     r1, -0x20(r1)
mflr     r0
mr       r5, r3
lfd      f1, lbl_80520090@sda21(r2)
stw      r0, 0x24(r1)
lis      r0, 0x4330
lis      r4, lbl_80498758@ha
stw      r31, 0x1c(r1)
addi     r31, r4, lbl_80498758@l
stw      r30, 0x18(r1)
lwz      r3, 0x40(r3)
stw      r0, 8(r1)
lha      r0, 6(r3)
lfs      f2, 0x50(r5)
mulli    r0, r0, 3
srawi    r0, r0, 2
xoris    r0, r0, 0x8000
stw      r0, 0xc(r1)
lfd      f0, 8(r1)
fsubs    f0, f0, f1
fcmpo    cr0, f2, f0
cror     2, 0, 2
bne      lbl_80402600
lwz      r3, spSysIF__8PSSystem@sda21(r13)
addi     r5, r5, 0x6c
li       r4, 0x1824
li       r6, 0
bl       playSystemSe__Q28PSSystem5SysIFFUlPP8JAISoundUl
lis      r3, 0xC0011025@ha
addi     r3, r3, 0xC0011025@l
bl       PSStart2DStream__FUl
lwz      r0, spSceneMgr__8PSSystem@sda21(r13)
cmplwi   r0, 0
bne      lbl_80402558
addi     r3, r31, 0x60
addi     r5, r31, 0x6c
li       r4, 0x1d3
crclr    6
bl       panic_f__12JUTExceptionFPCciPCce

lbl_80402558:
lwz      r30, spSceneMgr__8PSSystem@sda21(r13)
cmplwi   r30, 0
bne      lbl_80402578
addi     r3, r31, 0x60
addi     r5, r31, 0x6c
li       r4, 0x1dc
crclr    6
bl       panic_f__12JUTExceptionFPCciPCce

lbl_80402578:
lwz      r0, 4(r30)
cmplwi   r0, 0
bne      lbl_80402598
addi     r3, r31, 0x78
addi     r5, r31, 0x6c
li       r4, 0xcf
crclr    6
bl       panic_f__12JUTExceptionFPCciPCce

lbl_80402598:
lwz      r3, 4(r30)
lwz      r30, 4(r3)
cmplwi   r30, 0
bne      lbl_804025BC
addi     r3, r31, 0x78
addi     r5, r31, 0x84
li       r4, 0xd1
crclr    6
bl       panic_f__12JUTExceptionFPCciPCce

lbl_804025BC:
lwz      r12, 0(r30)
mr       r3, r30
lwz      r12, 0x40(r12)
mtctr    r12
bctrl
clrlwi.  r0, r3, 0x18
bne      lbl_804025EC
addi     r3, r31, 0xa8
addi     r5, r31, 0x6c
li       r4, 0x177
crclr    6
bl       panic_f__12JUTExceptionFPCciPCce

lbl_804025EC:
mr       r3, r30
lwz      r12, 0(r30)
lwz      r12, 0x54(r12)
mtctr    r12
bctrl

lbl_80402600:
lwz      r0, 0x24(r1)
lwz      r31, 0x1c(r1)
lwz      r30, 0x18(r1)
mtlr     r0
addi     r1, r1, 0x20
blr
	*/
}

/*
 * --INFO--
 * Address:	80402618
 * Size:	000040
 */
void SceneFinalFloor::doConfirmSetScene(Screen::SetSceneArg&)
{
	/*
stwu     r1, -0x10(r1)
mflr     r0
mr       r3, r4
stw      r0, 0x14(r1)
lwz      r12, 0(r4)
lwz      r12, 8(r12)
mtctr    r12
bctrl
subfic   r4, r3, 0x271a
addi     r0, r3, -10010
or       r0, r4, r0
srwi     r3, r0, 0x1f
lwz      r0, 0x14(r1)
mtlr     r0
addi     r1, r1, 0x10
blr
	*/
}

/*
 * --INFO--
 * Address:	80402658
 * Size:	00000C
 */
void SceneFinalFloor::getResName() const
{
	/*
lis      r3, lbl_80498814@ha
addi     r3, r3, lbl_80498814@l
blr
	*/
}

/*
 * --INFO--
 * Address:	80402664
 * Size:	000008
 */
u32 SceneFinalFloor::isUseBackupSceneInfo() { return 0x1; }

/*
 * --INFO--
 * Address:	8040266C
 * Size:	000008
 */
u32 SceneFinalFloor::getSceneType() { return 0x4E22; }

/*
 * --INFO--
 * Address:	80402674
 * Size:	000008
 */
u32 SceneFinalFloor::getOwnerID() { return 0x4B48; }

/*
 * --INFO--
 * Address:	8040267C
 * Size:	000014
 */
void SceneFinalFloor::getMemberID()
{
	/*
lis      r4, 0x5F464C52@ha
lis      r3, 0x0046494E@ha
addi     r4, r4, 0x5F464C52@l
addi     r3, r3, 0x0046494E@l
blr
	*/
}

/*
 * --INFO--
 * Address:	80402690
 * Size:	0000BC
 */
void SceneFinalFloor::doCreateObj(JKRArchive*)
{
	/*
stwu     r1, -0x20(r1)
mflr     r0
stw      r0, 0x24(r1)
stw      r31, 0x1c(r1)
stw      r30, 0x18(r1)
mr       r30, r4
stw      r29, 0x14(r1)
mr       r29, r3
li       r3, 0x70
bl       __nw__FUl
or.      r31, r3, r3
beq      lbl_8040271C
bl       __ct__Q26Screen7ObjBaseFv
lis      r4, __vt__Q32kh6Screen13ObjFinalFloor@ha
li       r3, 0
addi     r4, r4, __vt__Q32kh6Screen13ObjFinalFloor@l
lfs      f0, lbl_80520088@sda21(r2)
stw      r4, 0(r31)
addi     r4, r4, 0x10
li       r0, 1
stw      r4, 0x18(r31)
stw      r3, 0x38(r31)
stw      r3, 0x40(r31)
stw      r3, 0x48(r31)
stfs     f0, 0x58(r31)
stfs     f0, 0x50(r31)
stfs     f0, 0x60(r31)
stw      r3, 0x3c(r31)
stw      r3, 0x44(r31)
stw      r3, 0x4c(r31)
stfs     f0, 0x5c(r31)
stfs     f0, 0x54(r31)
stfs     f0, 0x64(r31)
stw      r0, 0x68(r31)
stw      r3, 0x6c(r31)

lbl_8040271C:
stw      r31, 0x220(r29)
mr       r3, r29
mr       r4, r31
mr       r5, r30
bl       registObj__Q26Screen9SceneBaseFPQ26Screen7ObjBaseP10JKRArchive
lwz      r0, 0x24(r1)
lwz      r31, 0x1c(r1)
lwz      r30, 0x18(r1)
lwz      r29, 0x14(r1)
mtlr     r0
addi     r1, r1, 0x20
blr
	*/
}

/*
 * --INFO--
 * Address:	8040274C
 * Size:	0000AC
 */
ObjFinalFloor::~ObjFinalFloor()
{
	/*
stwu     r1, -0x10(r1)
mflr     r0
stw      r0, 0x14(r1)
stw      r31, 0xc(r1)
mr       r31, r4
stw      r30, 8(r1)
or.      r30, r3, r3
beq      lbl_804027DC
lis      r4, __vt__Q32kh6Screen13ObjFinalFloor@ha
addi     r4, r4, __vt__Q32kh6Screen13ObjFinalFloor@l
stw      r4, 0(r30)
addi     r0, r4, 0x10
stw      r0, 0x18(r30)
beq      lbl_804027CC
lis      r4, __vt__Q26Screen7ObjBase@ha
addi     r4, r4, __vt__Q26Screen7ObjBase@l
stw      r4, 0(r30)
addi     r0, r4, 0x10
stw      r0, 0x18(r30)
beq      lbl_804027CC
lis      r4, __vt__Q26Screen8IObjBase@ha
addi     r4, r4, __vt__Q26Screen8IObjBase@l
stw      r4, 0(r30)
addi     r0, r4, 0x10
stw      r0, 0x18(r30)
bl       del__5CNodeFv
addi     r3, r30, 0x18
li       r4, 0
bl       __dt__11JKRDisposerFv
mr       r3, r30
li       r4, 0
bl       __dt__5CNodeFv

lbl_804027CC:
extsh.   r0, r31
ble      lbl_804027DC
mr       r3, r30
bl       __dl__FPv

lbl_804027DC:
lwz      r0, 0x14(r1)
mr       r3, r30
lwz      r31, 0xc(r1)
lwz      r30, 8(r1)
mtlr     r0
addi     r1, r1, 0x10
blr
	*/
}

} // namespace Screen
} // namespace kh

/*
 * --INFO--
 * Address:	804027F8
 * Size:	00004C
 */
void __sinit_khFinalFloor_cpp(void)
{
	/*
	lis      r3, __float_nan@ha
	li       r0, -1
	addi     r5, r3, __float_nan@l
	lis      r4, lbl_804EACA0@ha
	lfs      f3, 0(r5)
	lis      r3, msVal__Q32kh6Screen13ObjFinalFloor@ha
	lfs      f2, lbl_80520098@sda21(r2)
	addi     r3, r3, msVal__Q32kh6Screen13ObjFinalFloor@l
	stfsu    f3, lbl_804EACA0@l(r4)
	lfs      f1, lbl_8052009C@sda21(r2)
	lfs      f0, lbl_805200A0@sda21(r2)
	stw      r0, lbl_80516130@sda21(r13)
	stfs     f3, lbl_80516134@sda21(r13)
	stfs     f3, 4(r4)
	stfs     f3, 8(r4)
	stfs     f2, 4(r3)
	stfs     f1, 8(r3)
	stfs     f0, 0(r3)
	blr
	*/
}

namespace kh {
namespace Screen {

/*
 * --INFO--
 * Address:	80402844
 * Size:	000008
 */
ObjFinalFloor::@24 @~ObjFinalFloor()
{
	/*
addi     r3, r3, -24
b        __dt__Q32kh6Screen13ObjFinalFloorFv
	*/
}
} // namespace Screen
} // namespace kh
