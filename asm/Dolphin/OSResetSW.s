.include "macros.inc"
.section .sbss # 0x80514D80 - 0x80516360
.balign 8
ResetCallback: # local object
	.skip 4
Down: # local object
	.skip 4
LastState: # local object
	.skip 4
.balign 8
HoldUp: # local object
	.skip 8
.balign 8
HoldDown: # local object
	.skip 8

.section .text, "ax"  # 0x800056C0 - 0x80472F00
.global __OSResetSWInterruptHandler
__OSResetSWInterruptHandler:
/* 800F06D0 000ED610  7C 08 02 A6 */	mflr r0
/* 800F06D4 000ED614  90 01 00 04 */	stw r0, 4(r1)
/* 800F06D8 000ED618  94 21 FF D8 */	stwu r1, -0x28(r1)
/* 800F06DC 000ED61C  93 E1 00 24 */	stw r31, 0x24(r1)
/* 800F06E0 000ED620  93 C1 00 20 */	stw r30, 0x20(r1)
/* 800F06E4 000ED624  93 A1 00 1C */	stw r29, 0x1c(r1)
/* 800F06E8 000ED628  48 00 24 C9 */	bl __OSGetSystemTime
/* 800F06EC 000ED62C  3C A0 80 00 */	lis r5, 0x800000F8@ha
/* 800F06F0 000ED630  90 8D 8F D4 */	stw r4, (HoldDown+4)@sda21(r13)
/* 800F06F4 000ED634  80 05 00 F8 */	lwz r0, 0x800000F8@l(r5)
/* 800F06F8 000ED638  3C 80 43 1C */	lis r4, 0x431BDE83@ha
/* 800F06FC 000ED63C  38 84 DE 83 */	addi r4, r4, 0x431BDE83@l
/* 800F0700 000ED640  90 6D 8F D0 */	stw r3, HoldDown@sda21(r13)
/* 800F0704 000ED644  54 00 F0 BE */	srwi r0, r0, 2
/* 800F0708 000ED648  7C 04 00 16 */	mulhwu r0, r4, r0
/* 800F070C 000ED64C  54 00 8B FE */	srwi r0, r0, 0xf
/* 800F0710 000ED650  1C 00 00 64 */	mulli r0, r0, 0x64
/* 800F0714 000ED654  54 1D E8 FE */	srwi r29, r0, 3
/* 800F0718 000ED658  3B C0 00 00 */	li r30, 0
/* 800F071C 000ED65C  3F E0 CC 00 */	lis r31, 0xcc00
.L_800F0720:
/* 800F0720 000ED660  48 00 24 91 */	bl __OSGetSystemTime
/* 800F0724 000ED664  80 CD 8F D4 */	lwz r6, (HoldDown+4)@sda21(r13)
/* 800F0728 000ED668  6F C5 80 00 */	xoris r5, r30, 0x8000
/* 800F072C 000ED66C  80 0D 8F D0 */	lwz r0, HoldDown@sda21(r13)
/* 800F0730 000ED670  7C 86 20 10 */	subfc r4, r6, r4
/* 800F0734 000ED674  7C 00 19 10 */	subfe r0, r0, r3
/* 800F0738 000ED678  6C 03 80 00 */	xoris r3, r0, 0x8000
/* 800F073C 000ED67C  7C 1D 20 10 */	subfc r0, r29, r4
/* 800F0740 000ED680  7C A5 19 10 */	subfe r5, r5, r3
/* 800F0744 000ED684  7C A3 19 10 */	subfe r5, r3, r3
/* 800F0748 000ED688  7C A5 00 D1 */	neg. r5, r5
/* 800F074C 000ED68C  41 82 00 10 */	beq .L_800F075C
/* 800F0750 000ED690  80 1F 30 00 */	lwz r0, 0x3000(r31)
/* 800F0754 000ED694  54 00 03 DF */	rlwinm. r0, r0, 0, 0xf, 0xf
/* 800F0758 000ED698  41 82 FF C8 */	beq .L_800F0720
.L_800F075C:
/* 800F075C 000ED69C  3C 60 CC 00 */	lis r3, 0xCC003000@ha
/* 800F0760 000ED6A0  80 03 30 00 */	lwz r0, 0xCC003000@l(r3)
/* 800F0764 000ED6A4  54 00 03 DF */	rlwinm. r0, r0, 0, 0xf, 0xf
/* 800F0768 000ED6A8  40 82 00 34 */	bne .L_800F079C
/* 800F076C 000ED6AC  38 00 00 01 */	li r0, 1
/* 800F0770 000ED6B0  90 0D 8F BC */	stw r0, Down@sda21(r13)
/* 800F0774 000ED6B4  38 60 02 00 */	li r3, 0x200
/* 800F0778 000ED6B8  90 0D 8F C0 */	stw r0, LastState@sda21(r13)
/* 800F077C 000ED6BC  4B FF E8 85 */	bl __OSMaskInterrupts
/* 800F0780 000ED6C0  81 8D 8F B8 */	lwz r12, ResetCallback@sda21(r13)
/* 800F0784 000ED6C4  28 0C 00 00 */	cmplwi r12, 0
/* 800F0788 000ED6C8  41 82 00 14 */	beq .L_800F079C
/* 800F078C 000ED6CC  38 00 00 00 */	li r0, 0
/* 800F0790 000ED6D0  7D 88 03 A6 */	mtlr r12
/* 800F0794 000ED6D4  90 0D 8F B8 */	stw r0, ResetCallback@sda21(r13)
/* 800F0798 000ED6D8  4E 80 00 21 */	blrl 
.L_800F079C:
/* 800F079C 000ED6DC  38 00 00 02 */	li r0, 2
/* 800F07A0 000ED6E0  3C 60 CC 00 */	lis r3, 0xCC003000@ha
/* 800F07A4 000ED6E4  90 03 30 00 */	stw r0, 0xCC003000@l(r3)
/* 800F07A8 000ED6E8  80 01 00 2C */	lwz r0, 0x2c(r1)
/* 800F07AC 000ED6EC  83 E1 00 24 */	lwz r31, 0x24(r1)
/* 800F07B0 000ED6F0  83 C1 00 20 */	lwz r30, 0x20(r1)
/* 800F07B4 000ED6F4  83 A1 00 1C */	lwz r29, 0x1c(r1)
/* 800F07B8 000ED6F8  38 21 00 28 */	addi r1, r1, 0x28
/* 800F07BC 000ED6FC  7C 08 03 A6 */	mtlr r0
/* 800F07C0 000ED700  4E 80 00 20 */	blr 

.global OSGetResetButtonState
OSGetResetButtonState:
/* 800F07C4 000ED704  7C 08 02 A6 */	mflr r0
/* 800F07C8 000ED708  90 01 00 04 */	stw r0, 4(r1)
/* 800F07CC 000ED70C  94 21 FF E8 */	stwu r1, -0x18(r1)
/* 800F07D0 000ED710  93 E1 00 14 */	stw r31, 0x14(r1)
/* 800F07D4 000ED714  93 C1 00 10 */	stw r30, 0x10(r1)
/* 800F07D8 000ED718  93 A1 00 0C */	stw r29, 0xc(r1)
/* 800F07DC 000ED71C  4B FF E4 5D */	bl OSDisableInterrupts
/* 800F07E0 000ED720  7C 7E 1B 78 */	mr r30, r3
/* 800F07E4 000ED724  48 00 23 CD */	bl __OSGetSystemTime
/* 800F07E8 000ED728  3C A0 CC 00 */	lis r5, 0xCC003000@ha
/* 800F07EC 000ED72C  80 05 30 00 */	lwz r0, 0xCC003000@l(r5)
/* 800F07F0 000ED730  54 00 03 DF */	rlwinm. r0, r0, 0, 0xf, 0xf
/* 800F07F4 000ED734  40 82 00 DC */	bne .L_800F08D0
/* 800F07F8 000ED738  80 0D 8F BC */	lwz r0, Down@sda21(r13)
/* 800F07FC 000ED73C  2C 00 00 00 */	cmpwi r0, 0
/* 800F0800 000ED740  40 82 00 40 */	bne .L_800F0840
/* 800F0804 000ED744  80 0D 8F C8 */	lwz r0, HoldUp@sda21(r13)
/* 800F0808 000ED748  38 C0 00 00 */	li r6, 0
/* 800F080C 000ED74C  80 AD 8F CC */	lwz r5, (HoldUp+4)@sda21(r13)
/* 800F0810 000ED750  38 E0 00 01 */	li r7, 1
/* 800F0814 000ED754  7C 00 32 78 */	xor r0, r0, r6
/* 800F0818 000ED758  7C A5 32 78 */	xor r5, r5, r6
/* 800F081C 000ED75C  90 ED 8F BC */	stw r7, Down@sda21(r13)
/* 800F0820 000ED760  7C A0 03 79 */	or. r0, r5, r0
/* 800F0824 000ED764  41 82 00 08 */	beq .L_800F082C
/* 800F0828 000ED768  48 00 00 08 */	b .L_800F0830
.L_800F082C:
/* 800F082C 000ED76C  7C C7 33 78 */	mr r7, r6
.L_800F0830:
/* 800F0830 000ED770  90 8D 8F D4 */	stw r4, (HoldDown+4)@sda21(r13)
/* 800F0834 000ED774  7C FD 3B 78 */	mr r29, r7
/* 800F0838 000ED778  90 6D 8F D0 */	stw r3, HoldDown@sda21(r13)
/* 800F083C 000ED77C  48 00 01 48 */	b .L_800F0984
.L_800F0840:
/* 800F0840 000ED780  80 0D 8F C8 */	lwz r0, HoldUp@sda21(r13)
/* 800F0844 000ED784  39 20 00 00 */	li r9, 0
/* 800F0848 000ED788  80 AD 8F CC */	lwz r5, (HoldUp+4)@sda21(r13)
/* 800F084C 000ED78C  39 40 00 01 */	li r10, 1
/* 800F0850 000ED790  7C 00 4A 78 */	xor r0, r0, r9
/* 800F0854 000ED794  7C A5 4A 78 */	xor r5, r5, r9
/* 800F0858 000ED798  7C A0 03 79 */	or. r0, r5, r0
/* 800F085C 000ED79C  40 82 00 58 */	bne .L_800F08B4
/* 800F0860 000ED7A0  3C C0 80 00 */	lis r6, 0x800000F8@ha
/* 800F0864 000ED7A4  80 AD 8F D4 */	lwz r5, (HoldDown+4)@sda21(r13)
/* 800F0868 000ED7A8  80 E6 00 F8 */	lwz r7, 0x800000F8@l(r6)
/* 800F086C 000ED7AC  3C C0 43 1C */	lis r6, 0x431BDE83@ha
/* 800F0870 000ED7B0  39 06 DE 83 */	addi r8, r6, 0x431BDE83@l
/* 800F0874 000ED7B4  80 0D 8F D0 */	lwz r0, HoldDown@sda21(r13)
/* 800F0878 000ED7B8  54 E6 F0 BE */	srwi r6, r7, 2
/* 800F087C 000ED7BC  7C C8 30 16 */	mulhwu r6, r8, r6
/* 800F0880 000ED7C0  54 C6 8B FE */	srwi r6, r6, 0xf
/* 800F0884 000ED7C4  1C C6 00 64 */	mulli r6, r6, 0x64
/* 800F0888 000ED7C8  7C E5 20 10 */	subfc r7, r5, r4
/* 800F088C 000ED7CC  7C 00 19 10 */	subfe r0, r0, r3
/* 800F0890 000ED7D0  54 C8 E8 FE */	srwi r8, r6, 3
/* 800F0894 000ED7D4  6C 05 80 00 */	xoris r5, r0, 0x8000
/* 800F0898 000ED7D8  6D 26 80 00 */	xoris r6, r9, 0x8000
/* 800F089C 000ED7DC  7C 07 40 10 */	subfc r0, r7, r8
/* 800F08A0 000ED7E0  7C A5 31 10 */	subfe r5, r5, r6
/* 800F08A4 000ED7E4  7C A6 31 10 */	subfe r5, r6, r6
/* 800F08A8 000ED7E8  7C A5 00 D1 */	neg. r5, r5
/* 800F08AC 000ED7EC  40 82 00 08 */	bne .L_800F08B4
/* 800F08B0 000ED7F0  7D 2A 4B 78 */	mr r10, r9
.L_800F08B4:
/* 800F08B4 000ED7F4  2C 0A 00 00 */	cmpwi r10, 0
/* 800F08B8 000ED7F8  41 82 00 0C */	beq .L_800F08C4
/* 800F08BC 000ED7FC  38 00 00 01 */	li r0, 1
/* 800F08C0 000ED800  48 00 00 08 */	b .L_800F08C8
.L_800F08C4:
/* 800F08C4 000ED804  38 00 00 00 */	li r0, 0
.L_800F08C8:
/* 800F08C8 000ED808  7C 1D 03 78 */	mr r29, r0
/* 800F08CC 000ED80C  48 00 00 B8 */	b .L_800F0984
.L_800F08D0:
/* 800F08D0 000ED810  80 0D 8F BC */	lwz r0, Down@sda21(r13)
/* 800F08D4 000ED814  2C 00 00 00 */	cmpwi r0, 0
/* 800F08D8 000ED818  41 82 00 34 */	beq .L_800F090C
/* 800F08DC 000ED81C  80 AD 8F C0 */	lwz r5, LastState@sda21(r13)
/* 800F08E0 000ED820  38 00 00 00 */	li r0, 0
/* 800F08E4 000ED824  90 0D 8F BC */	stw r0, Down@sda21(r13)
/* 800F08E8 000ED828  2C 05 00 00 */	cmpwi r5, 0
/* 800F08EC 000ED82C  3B A5 00 00 */	addi r29, r5, 0
/* 800F08F0 000ED830  41 82 00 10 */	beq .L_800F0900
/* 800F08F4 000ED834  90 8D 8F CC */	stw r4, (HoldUp+4)@sda21(r13)
/* 800F08F8 000ED838  90 6D 8F C8 */	stw r3, HoldUp@sda21(r13)
/* 800F08FC 000ED83C  48 00 00 88 */	b .L_800F0984
.L_800F0900:
/* 800F0900 000ED840  90 0D 8F CC */	stw r0, (HoldUp+4)@sda21(r13)
/* 800F0904 000ED844  90 0D 8F C8 */	stw r0, HoldUp@sda21(r13)
/* 800F0908 000ED848  48 00 00 7C */	b .L_800F0984
.L_800F090C:
/* 800F090C 000ED84C  80 CD 8F C8 */	lwz r6, HoldUp@sda21(r13)
/* 800F0910 000ED850  39 00 00 00 */	li r8, 0
/* 800F0914 000ED854  80 ED 8F CC */	lwz r7, (HoldUp+4)@sda21(r13)
/* 800F0918 000ED858  7C C0 42 78 */	xor r0, r6, r8
/* 800F091C 000ED85C  7C E5 42 78 */	xor r5, r7, r8
/* 800F0920 000ED860  7C A0 03 79 */	or. r0, r5, r0
/* 800F0924 000ED864  41 82 00 50 */	beq .L_800F0974
/* 800F0928 000ED868  3C A0 80 00 */	lis r5, 0x800000F8@ha
/* 800F092C 000ED86C  80 05 00 F8 */	lwz r0, 0x800000F8@l(r5)
/* 800F0930 000ED870  3C A0 10 62 */	lis r5, 0x10624DD3@ha
/* 800F0934 000ED874  38 A5 4D D3 */	addi r5, r5, 0x10624DD3@l
/* 800F0938 000ED878  54 00 F0 BE */	srwi r0, r0, 2
/* 800F093C 000ED87C  7C 05 00 16 */	mulhwu r0, r5, r0
/* 800F0940 000ED880  54 00 D1 BE */	srwi r0, r0, 6
/* 800F0944 000ED884  1C 00 00 28 */	mulli r0, r0, 0x28
/* 800F0948 000ED888  7C E7 20 10 */	subfc r7, r7, r4
/* 800F094C 000ED88C  7C A6 19 10 */	subfe r5, r6, r3
/* 800F0950 000ED890  6C A6 80 00 */	xoris r6, r5, 0x8000
/* 800F0954 000ED894  6D 05 80 00 */	xoris r5, r8, 0x8000
/* 800F0958 000ED898  7C 00 38 10 */	subfc r0, r0, r7
/* 800F095C 000ED89C  7C A5 31 10 */	subfe r5, r5, r6
/* 800F0960 000ED8A0  7C A6 31 10 */	subfe r5, r6, r6
/* 800F0964 000ED8A4  7C A5 00 D1 */	neg. r5, r5
/* 800F0968 000ED8A8  41 82 00 0C */	beq .L_800F0974
/* 800F096C 000ED8AC  3B A0 00 01 */	li r29, 1
/* 800F0970 000ED8B0  48 00 00 14 */	b .L_800F0984
.L_800F0974:
/* 800F0974 000ED8B4  38 00 00 00 */	li r0, 0
/* 800F0978 000ED8B8  90 0D 8F CC */	stw r0, (HoldUp+4)@sda21(r13)
/* 800F097C 000ED8BC  3B A0 00 00 */	li r29, 0
/* 800F0980 000ED8C0  90 0D 8F C8 */	stw r0, HoldUp@sda21(r13)
.L_800F0984:
/* 800F0984 000ED8C4  3C A0 80 00 */	lis r5, 0x800030E3@ha
/* 800F0988 000ED8C8  93 AD 8F C0 */	stw r29, LastState@sda21(r13)
/* 800F098C 000ED8CC  88 05 30 E3 */	lbz r0, 0x800030E3@l(r5)
/* 800F0990 000ED8D0  54 00 06 FF */	clrlwi. r0, r0, 0x1b
/* 800F0994 000ED8D4  41 82 00 A0 */	beq .L_800F0A34
/* 800F0998 000ED8D8  1D 40 00 3C */	mulli r10, r0, 0x3c
/* 800F099C 000ED8DC  80 05 00 F8 */	lwz r0, 0xf8(r5)
/* 800F09A0 000ED8E0  81 2D 8F 4C */	lwz r9, (__OSStartTime+4)@sda21(r13)
/* 800F09A4 000ED8E4  81 0D 8F 48 */	lwz r8, __OSStartTime@sda21(r13)
/* 800F09A8 000ED8E8  54 06 F0 BE */	srwi r6, r0, 2
/* 800F09AC 000ED8EC  7D 40 FE 70 */	srawi r0, r10, 0x1f
/* 800F09B0 000ED8F0  7C E0 31 D6 */	mullw r7, r0, r6
/* 800F09B4 000ED8F4  7C 0A 30 16 */	mulhwu r0, r10, r6
/* 800F09B8 000ED8F8  7C AA 31 D6 */	mullw r5, r10, r6
/* 800F09BC 000ED8FC  7D 29 28 14 */	addc r9, r9, r5
/* 800F09C0 000ED900  3B E0 00 00 */	li r31, 0
/* 800F09C4 000ED904  7C E7 02 14 */	add r7, r7, r0
/* 800F09C8 000ED908  7C 0A F9 D6 */	mullw r0, r10, r31
/* 800F09CC 000ED90C  7C 07 02 14 */	add r0, r7, r0
/* 800F09D0 000ED910  7D 08 01 14 */	adde r8, r8, r0
/* 800F09D4 000ED914  6D 07 80 00 */	xoris r7, r8, 0x8000
/* 800F09D8 000ED918  6C 65 80 00 */	xoris r5, r3, 0x8000
/* 800F09DC 000ED91C  7C 04 48 10 */	subfc r0, r4, r9
/* 800F09E0 000ED920  7C A5 39 10 */	subfe r5, r5, r7
/* 800F09E4 000ED924  7C A7 39 10 */	subfe r5, r7, r7
/* 800F09E8 000ED928  7C A5 00 D1 */	neg. r5, r5
/* 800F09EC 000ED92C  41 82 00 48 */	beq .L_800F0A34
/* 800F09F0 000ED930  7C 89 20 10 */	subfc r4, r9, r4
/* 800F09F4 000ED934  7C 68 19 10 */	subfe r3, r8, r3
/* 800F09F8 000ED938  38 A0 00 00 */	li r5, 0
/* 800F09FC 000ED93C  4B FD 13 C9 */	bl __div2i
/* 800F0A00 000ED940  38 A0 00 00 */	li r5, 0
/* 800F0A04 000ED944  38 C0 00 02 */	li r6, 2
/* 800F0A08 000ED948  4B FD 13 BD */	bl __div2i
/* 800F0A0C 000ED94C  38 00 00 01 */	li r0, 1
/* 800F0A10 000ED950  7C 84 00 38 */	and r4, r4, r0
/* 800F0A14 000ED954  7C 60 F8 38 */	and r0, r3, r31
/* 800F0A18 000ED958  7C 83 FA 78 */	xor r3, r4, r31
/* 800F0A1C 000ED95C  7C 00 FA 78 */	xor r0, r0, r31
/* 800F0A20 000ED960  7C 60 03 79 */	or. r0, r3, r0
/* 800F0A24 000ED964  40 82 00 0C */	bne .L_800F0A30
/* 800F0A28 000ED968  3B A0 00 01 */	li r29, 1
/* 800F0A2C 000ED96C  48 00 00 08 */	b .L_800F0A34
.L_800F0A30:
/* 800F0A30 000ED970  3B A0 00 00 */	li r29, 0
.L_800F0A34:
/* 800F0A34 000ED974  7F C3 F3 78 */	mr r3, r30
/* 800F0A38 000ED978  4B FF E2 29 */	bl OSRestoreInterrupts
/* 800F0A3C 000ED97C  7F A3 EB 78 */	mr r3, r29
/* 800F0A40 000ED980  80 01 00 1C */	lwz r0, 0x1c(r1)
/* 800F0A44 000ED984  83 E1 00 14 */	lwz r31, 0x14(r1)
/* 800F0A48 000ED988  83 C1 00 10 */	lwz r30, 0x10(r1)
/* 800F0A4C 000ED98C  83 A1 00 0C */	lwz r29, 0xc(r1)
/* 800F0A50 000ED990  38 21 00 18 */	addi r1, r1, 0x18
/* 800F0A54 000ED994  7C 08 03 A6 */	mtlr r0
/* 800F0A58 000ED998  4E 80 00 20 */	blr 

.global OSGetResetSwitchState
OSGetResetSwitchState:
/* 800F0A5C 000ED99C  7C 08 02 A6 */	mflr r0
/* 800F0A60 000ED9A0  90 01 00 04 */	stw r0, 4(r1)
/* 800F0A64 000ED9A4  94 21 FF F8 */	stwu r1, -8(r1)
/* 800F0A68 000ED9A8  4B FF FD 5D */	bl OSGetResetButtonState
/* 800F0A6C 000ED9AC  80 01 00 0C */	lwz r0, 0xc(r1)
/* 800F0A70 000ED9B0  38 21 00 08 */	addi r1, r1, 8
/* 800F0A74 000ED9B4  7C 08 03 A6 */	mtlr r0
/* 800F0A78 000ED9B8  4E 80 00 20 */	blr 
